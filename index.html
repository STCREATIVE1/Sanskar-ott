<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sanskar OTT</title>
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; margin: 0; }
        #player-box { width: 100%; position: sticky; top: 0; z-index: 100; background: #000; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; padding: 15px; }
        .card { background: #1a1a1a; border-radius: 8px; padding: 8px; text-align: center; cursor: pointer; border: 1px solid #333; }
        .card img { width: 100%; border-radius: 5px; height: 70px; object-fit: contain; }
        .card p { margin: 8px 0 0; font-size: 12px; font-weight: bold; }
    </style>
</head>
<body>
    <div id="player-box">
        <video id="videoPlayer" class="video-js vjs-default-skin vjs-16-9" controls autoplay></video>
    </div>
    <div class="grid" id="list"></div>

    <script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
    <script>
        var player = videojs('videoPlayer');
        // live_data.json se channels load karna
        fetch('live_data.json').then(r => r.json()).then(data => {
            const container = document.getElementById('list');
            data.forEach(ch => {
                container.innerHTML += `
                    <div class="card" onclick="play('${ch.id}', '${ch.type}')">
                        <img src="${ch.img}"><p>${ch.title}</p>
                    </div>`;
            });
        });
        function play(id, type) {
            player.src({ src: `api/stream.php?id=${id}&type=${type}`, type: 'application/x-mpegURL' });
            player.play();
            window.scrollTo(0,0);
        }
    </script>
</body>
</html>
